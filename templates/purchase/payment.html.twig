{% extends "base.html.twig" %}

{% block title %}
	Payer votre commande avec Stripe
{% endblock %}

{% block body %}
	<div class="container pt-5">
		<div class="d-flex flex-column align-items-center">
			<h1>Payer votre commande avec Stripe</h1>
			<form id="payment-form" class="mt-3">
				<div
					id="payment-element"><!--Stripe.js injects the Payment Element-->
				</div>
				<button id="submit">
					<div class="spinner hidden" id="spinner"></div>
					<span id="button-text">Payer avec Stripe</span>
				</button>
				<div id="payment-message" class="hidden"></div>
			</form>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="https://js.stripe.com/v3/"></script>
	<script>
		const clientSecret = '{{ clientSecret }}';
        const stripePublicKey = '{{ stripePublicKey }}';
        const redirectAfterSuccessUrl = '{{ url('app_payment_success', {'id': purchase.id })}}';
	</script>
	<script src="{{ asset('js/payment.js') }}" defer></script>
{% endblock %}
