{% extends 'base.html.twig' %}

{% block title %}Mes commandes
{% endblock %}

{% block body %}
	<div class="ykzkxt d6i7ks">
		<div class="d-flex">
			<div class="w-100">
				<div class="d-md-flex justify-content-md-between align-items-center spacer-section-checkout">
					<div class="flex-fill mb-6 mb-md-0">
						<h1 class="pr-md-6 bkicbc">Commandes</h1>
					</div>
				</div>
			</div>
		</div>
		<div class="wwz44q">
			{% for p in purchases %}
				<div class="xo2a4n">
					<div class="ixxz17">
						<div class="space-y-1">
							<div class="hp7ucm">
								<div class="row">
									<div class="col-12 col-md-4 py-1 d-none d-md-block font-weight-bold">
										N° de commande
									</div>
									<div class="col-12 col-md-8 py-1">
										<div class="d-md-none font-weight-bold">
											N° de commande
										</div>
										<div class="d-flex justify-content-between align-items-center">
											<div class="text-truncate mr-3">
												<div class="text-truncate text-wrap">
													{{ p.number }}
												</div>
											</div>
											{% if p.status == constant('App\\Entity\\Purchase::STATUS_PAID') %}
												<div>
													<a href="{{ path('app_invoice_customer', {'id': p.id} )}}" class="btn btn-md a3awwl">
														<span>Facture PDF</span>
													</a>
												</div>
											{% endif %}
										</div>
									</div>
								</div>
							</div>
							<div class="hp7ucm">
								<div class="row">
									<div class="col-12 col-md-4 py-1 d-none d-md-block font-weight-bold">
										Nom du programme
									</div>
									<div class="col-12 col-md-8 py-1">
										<div class="d-md-none font-weight-bold">
											Nom du programme
										</div>
										<div class="d-flex justify-content-between align-items-center">
											<div class="text-truncate mr-3">
												<div class="text-truncate text-wrap">
													{{ p.program.name }}
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="hp7ucm">
								<div class="row">
									<div class="col-12 col-md-4 py-1 d-none d-md-block font-weight-bold">
										Prix
									</div>
									<div class="col-12 col-md-8 py-1">
										<div class="d-md-none font-weight-bold">
											Prix
										</div>
										<div class="d-flex justify-content-between align-items-center">
											<div class="text-truncate mr-3">
												<div class="text-truncate text-wrap">
													{{ p.amount | amount }}
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="hp7ucm">
								<div class="row">
									<div class="col-12 col-md-4 py-1 d-none d-md-block font-weight-bold">
										Passée le
									</div>
									<div class="col-12 col-md-8 py-1">
										<div class="d-md-none font-weight-bold">
											Passée le
										</div>
										<div class="d-flex justify-content-between align-items-center">
											<div class="text-truncate mr-3">
												<div class="text-truncate text-wrap">
													{{ p.createdAt|format_datetime('long', 'none', locale='fr') }}
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="hp7ucm">
								<div class="row">
									<div class="col-12 col-md-4 py-1 d-none d-md-block font-weight-bold">
										Status
									</div>
									<div class="col-12 col-md-8 py-1">
										<div class="d-md-none font-weight-bold">
											Status
										</div>
										<div class="d-flex justify-content-between align-items-center">
											<div class="text-truncate mr-3">
												<div class="text-truncate text-wrap">
													{% if p.status == constant('App\\Entity\\Purchase::STATUS_PAID')  %}
														<span class="badge text-bg-success">{{ p.status }}</span>
													{% else %}
														<span class="badge text-bg-warning">{{ p.status }}</span>
													{% endif %}
												</div>
											</div>
											{% if p.status == constant('App\\Entity\\Purchase::STATUS_PENDING') %}
												<div>
													<a href="{{ path('purchase_payment_form', {'id': p.id}) }}" class="btn btn-md a3awwl">
														<span>Payer</span>
													</a>
												</div>
											{% endif %}
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
